# 1 On-Demand Resources Essentials - 按需资源基础

原文地址： [https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083-CH2-SW1](https://developer.apple.com/library/archive/documentation/FileManagement/Conceptual/On_Demand_Resources_Guide/index.html#//apple_ref/doc/uid/TP40015083-CH2-SW1)



On-demand resources are app contents that are hosted on the App Store and are separate from the related app bundle that you download. They enable smaller app bundles, faster downloads, and richer app content. The app requests sets of on-demand resources, and the operating system manages downloading and storage. The app uses the resources and then releases the request. After downloading, the resources may stay on the device through multiple launch cycles, making access even faster.

按需资源是托管在 App Store 上的应用程序内容，与您下载的相关应用程序包是分开的。它们可以实现更小的应用程序包、更快的下载和更丰富的应用内容。应用程序请求按需资源集，操作系统管理下载和存储。应用程序使用资源，然后释放请求。下载后，资源可能会在设备上停留多个启动周期，从而使访问速度更快。

The resources can be of any type supported by bundles except for executable code. Table 1-1 shows supported on-demand resource types and indicates whether those types are included in the target as a file or in an asset catalog.

这些资源可以是包中支持除了可执行代码以外的任何类型。表1-1显示了支持的按需资源类型，并指示这些类型是作为文件还是在资源目录中包含在目标中。


**Table 1-1** On-demand resource types **表1-1** 按需资源类型

|Type|Asset catalog|File|
|:-:|:-:|:-:|
|Data file|✓|✓|
|Image|✓|✓|
|OpenGL shader|–|✓|
|SpriteKit particle|–|✓|
|SpriteKit scene|–|✓|
|SpriteKit texture atlas|✓|✓|
|Apple TV Image Stack|✓|✓|

A data file can contain any sort of data except for executable Swift, Objective-C, C, or C++ code. Files generated by scripting languages can be on-demand resources.

数据文件可以包含任何类型的数据，除了可执行的 Swift、Objective-C、C 或 C++ 代码。由脚本语言生成的文件可以作为按需资源。

## Benefits of On-Demand Resources - 按需资源的好处

Some of the main ways apps can benefit from on-demand resources include:

一些应用程序从按需资源中受益的主要方式包括：

- **Smaller app size.** The size of the app bundle downloaded by the user is smaller resulting in faster downloads and more storage room on the device.
- **更小的应用大小。**用户下载的应用包大小更小，导致下载速度更快，并在设备上腾出更多存储空间。
- **Lazy loading of app resources.** The app has resources that are used only in certain states. The resources are requested when the app is likely to enter the appropriate state. For example, in a game with many levels, the user needs only the resources associated with the current and next levels.
- **应用资源的延迟加载。**应用拥有仅在特定状态下使用的资源。当应用可能进入适当状态时，请求这些资源。例如，在一个有多个关卡的游戏中，用户只需要当前和下一个关卡相关的资源。
- **Remote storage of rarely used resources.** The app has resources that are used infrequently. The resources are requested as they are needed. For example, an app tutorial is usually shown once after the app is opened for the first time, and may never be used again. The app requests the tutorial on first launch, and then requests the tutorial only when needed or when new features are added.
- **远程存储不经常使用的资源。**应用包含不经常使用的资源。这些资源在需要时进行请求。例如，应用教程通常在首次打开应用后显示一次，之后可能再也不会使用。应用在首次启动时请求教程，然后仅在需要时或添加新功能时请求教程。
- **Remote storage of in-app purchase resources.** The app offers in-app purchases that includes additional resources. The resources for purchased modules are requested by the app after it is launched. For example, a user purchases the SuperGeeky emoticon pack in a keyboard app. The app requests the pack after it finishes launching.
- **远程存储应用内购买资源。**应用提供应用内购买，包括额外的资源。应用在启动后请求购买的模块资源。例如，用户在一个键盘应用中购买了“超级极客表情包”。应用在启动完成后请求这个表情包。

## How Tags Work

You identify on-demand resources during development by assigning them one or more tags. A tag is a string identifier you create. You can use the name of the tag to identify how the included resources are used in your app. In a game, for example, use the tag level-5 for each of the resources associated with level five. For more information on tags, see Creating and Assigning Tags.

At runtime, you request access to remote resources by specifying a set of tags. The operating system downloads any resources marked with those tags and then retains them in storage until the app finishes using them. When the operating system needs more storage, it purges the local storage associated with one or more tags that are no longer retained. Tagged sets of resources may remain on the device for some time before they are purged. For information on requesting access to the resources associated with tags, see Accessing and Downloading On-Demand Resources.

Continuing with the game example, in a game divided into many levels the user needs only the resources associated with the level at which the user is playing and the next likely level. Figure 1-1 shows an app bundle that includes all of the resources for all the levels.

