App Programming Guide for iOS (1) ---- Expected App Behaviors

原文链接：[https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW2](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW2)

<span id="1">
#1 Expected App Behaviors - 期望的App行为

Every new Xcode project comes configured to run right away in iOS Simulator or on a device. But simply being able to run on a device does not mean that your app is ready to ship on the App Store. Every app requires some amount of customization to ensure a good experience for the user. Customizations can range from providing an icon for your app to making architectural-level decisions about how your app presents and uses information. This chapter describes the behaviors that all apps are expected to handle and that you should consider early in the planning process.

每一个新的 Xcode 工程都被配置为在 iOS Simulator 或设备上运行。但是仅仅能在一个设备上运行并不意味着你的 APP 已经准备好上传到 App Store。每个应用程序都需要一定数量的定制，以确保为用户提供良好的体验。定制的范围可以从给 APP 提供一个 icon 到从架构层的决定你的 APP 如何展示和使用信息。本章描述了所有 APP 都要处理的行为，你应该在规划过程中尽早考虑。

<span id="1.1">
##1.1 Providing the Required Resources - 提供需要的资源

Every app you create must have the following set of resources and metadata so that it can be displayed properly on iOS devices:

你创建的每个 APP 都必须有以下资源和元数据才能正确的显示在 iOS 设备上。

- **An information property-list file.** The *Info.plist* file contains metadata about your app, which the system uses to interact with your app. Xcode creates this file for you automatically based on your project’s configuration and settings. If you want to view or modify the contents of this file directly, you can do so from the `Info` tab of your project. For information about editing this file and for recommendations about what keys you should include, see [The Information Property List File](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW5).
- **一个信息属性列表文件。** *Info.plist* 文件包含了关于你的 APP 的元数据，系统会用来与你的 APP 交互。Xcode 会基于你的工程配置和设置自动的创建这个文件。如果你想要直接查看或修改这个文件的内容，你可以从你的工程的 `Info` tab 实现。关于编辑这个文件的信息，以及推荐应该包含的 key，参见 [The Information Property List File](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW5)。
- **A declaration of the app’s required capabilities.** Every app must declare the hardware capabilities or features that it requires to run. The App Store uses this information to determine whether or not a user can run your app on a specific device. You can edit your app’s list of requirements using the `Required device capabilities` entry in the `Info` tab of your project. For information on how to configure this key, see [Declaring the Required Device Capabilities](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW4).
- **一份 APP 所需的功能的声明。** 每个 APP 必须声明它需要用来运行的硬件能力和功能。App Store 使用这个信息决定用户是否可以在特定的设备上运行你的 APP。你可以在你的工程的 `Info` tab 里使用 `Required device capabilities` 实体编辑你的 APP 的需求列表。关于如何配置这个 key，参见 [Declaring the Required Device Capabilities](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW4)。
- **One or more icons.** The system displays your app icon on the home screen of a user’s device. The system may also use other versions of your icon in the Settings app or when displaying the results of a search. For information about how to specify app icons, see [App Icons](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW1).
- **一个或多个 icon。** 系统会在用户设备的 home 屏幕显示你的 APP icon。系统也可能在 Settings 应用程序或当显示搜索结果时使用你的 icon 的其他版本。关于如何制定 APP icon 的信息，参见 [App Icons](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW1)。
- **One or more launch images.** When an app is launched, the system displays a temporary image until the app is able to present its user interface. This temporary image is your app’s launch image and it provides the user with immediate feedback that your app is launching and will be ready soon. You must provide at least one launch image for your app and you may provide additional launch images to address specific scenarios. For information about creating your launch images, see [App Launch (Default) Images](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW3).
- **一个或多个启动图。** 当 APP 被启动，系统会先显示一个临时的图片，直到 APP 能够显示其用户界面。这个临时图片即 APP 的启动图，它提供给用户一个立即的反馈，告诉用户 APP 正在启动并很快就会准备好。你必须提供至少一张启动图，也可以提供更多的启动图以满足特殊的场景。关于创建启动图的信息，参见 [App Launch (Default) Images](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW3)。

These resources are required for all apps but are not the only ones you should include. There are many keys that Xcode does not include in your app’s *Info.plist* file by default. Most of the additional keys are important only if you incorporate specific features into your app. For example, an app that uses the microphone should include the *NSMicrophoneUsageDescription* key and provide the user with information about how the app intends to use it.

这些资源对所有 APP 都是必须的，并且不是你应该包含的唯一资源。有许多 key 并没有被 Xcode 默认包含在 APP 的 *Info.plist* 文件中。大部分附加的 key 都只在你的应用中包含特定功能时才是重要的。例如，使用麦克风的 APP 应该包含 *NSMicrophoneUsageDescription* 并提供 APP 将如何使用它的信息。 

<span id="1.1.1">
###1.1.1 The App Bundle - APP Bundle

When you build your iOS app, Xcode packages it as a bundle. A bundle is a directory in the file system that groups related resources together in one place. An iOS app bundle contains the app executable file and supporting resource files such as app icons, image files, and localized content. Table 1-1 lists the contents of a typical iOS app bundle, which for demonstration purposes is called *MyApp*. This example is for illustrative purposes only. Some of the files listed in this table may not appear in your own app bundles.

当你构建 iOS APP 时，Xcode 将其打包成一个 bundle。Bundle 是文件系统中的一个目录，将相关的资源分组放到同一个地方。一个 iOS APP bundle 包含了该 APP 的可执行文件和支持的资源文件，如 APP icon，图片文件和本地化内容。表 1-1 列举了一个典型 iOS APP bundle 的内容，出于演示目的将它成为 *MyApp*。这个例子仅作于说明用。表中列出的某些文件可能不会出现在你自己的 APP bundle 中。

**Table 1-1**  A typical app bundle

| **File** | **Example** | **Description** |
| -------------------------------------- | ---------------------------------------- | ---------------------------------------- |
| App executable </br> APP 可执行文件 | MyApp                                    | The executable file contains your app’s compiled code. The name of your app’s executable file is the same as your app name minus the *.app* extension. </br>  This file is required. </br> 这个可执行文件包含了你程序的已编译的代码。你 APP 的可执行文件的名字与你 APP 的名字相同，去掉 *.app* 后缀。 </br> 这个文件是必须的。 |
| The information property list file </br> 信息属性列表文件 | Info.plist                               | The *Info.plist* file contains configuration data for the app. The system uses this data to determine how to interact with the app. </br> This file is required and must be called *Info.plist*. For more information, see [The Information Property List File](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW5). </br> *Info.plist* 文件包含了 APP 的配置数据。系统使用这些数据来决定如何与 APP 交互。 </br> 该文件是必须的，并且必须被命名为 *Info.plist*。更多信息，参见  [The Information Property List File](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW5)。 |
| App icons </br> App 图标 | Icon.png</br>Icon@2x.png</br>Icon-Small.png</br>Icon-Small@2x.png | Your app icon is used to represent your app on the device’s Home screen. Other icons are used by the system in appropriate places. Icons with *@2x* in their filename are intended for devices with Retina displays. </br> An app icon is required. For information about specifying icon image files, see [App Icons](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW1). </br> 你的 APP 图标用于在设备的 Home 屏幕展示你的 APP。其他图标被系统用于适当的地方。文件名中带有 *@2x* 的图标用于带有 Retina 显示的设备。 </br> App 图标是必须的。关于指定图标图像文件的信息，参见 [App Icons](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW1) |
| Launch images </br> 启动图 | Default.png </br> Default-Portrait.png </br> Default-Landscape.png | The system uses this file as a temporary background while your app is launching. It is removed as soon as your app is ready to display its user interface. </br> At least one launch image is required. For information about specifying launch images, see [App Launch (Default) Images](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW3).  </br> 系统使用该文件作为 APP 启动过程中的临时背景。当 APP 准备好显示用户界面时，就会把它移除。 </br> 至少需要一张启动图。关于指定启动图的信息，参见 [App Launch (Default) Images](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW3)。|
| Storyboard files (or nib files) </br> Storyboard 文件（或 nib 文件） | MainBoard.storyboard                     | Storyboards contain the views and view controllers that the app presents on screen. Views in a storyboard are organized according to the view controller that presents them. Storyboards also identify the transitions (called segues) that take the user from one set of views to another. </br> The name of the main storyboard file is set by Xcode when you create your project. You can change the name by assigning a different value to the *UIMainStoryboardFile* key in the *Info.plist* file. Apps that use nib files instead of storyboards can replace the *UIMainStoryboardFile* key with the *NSMainNibFile* key and use that key to specify their main nib file. </br> The use of storyboards (or nib files) is optional but recommended. </br> Storyboard 包含了 APP 展示在屏幕上的视图和视图控制器。Storyboard 也定义了用户从一个视图集到另一个的视图集的转换（称为场景）。  </br> 主 storyboard 文件的名字在你创建工程时由 Xcode 设定。你可以修改该名字，通过对 *Info.plist* 文件中的 *UIMainStoryboardFile* key 赋不同的值。使用 nib 文件取代 storyboard 的 APP 可以将  *UIMainStoryboardFile* key 换成 *NSMainNibFile* key，并使用该 key 指定他们的主 nib 文件。 </br> Storyboard （或 nib 文件）的使用是可选的，但是推荐使用。 |
| Ad hoc distribution icon </br> 特别发布图标 | iTunesArtwork | If you are distributing your app ad hoc, include a 512 x 512 pixel version of your app icon. This icon is normally provided by the App Store from the materials you submit to iTunes Connect. However, because apps distributed ad hoc do not go through the App Store, your icon must be present in your app bundle instead. iTunes uses this icon to represent your app. (The file you specify should be the same one you would have submitted to the App Store, if you were distributing your app that way.) </br> The filename of this icon must be *iTunesArtwork* and must not include a filename extension. This file is required for ad hoc distribution but is optional otherwise. </br> 如果你要 ad hoc 发布你的 APP，需要包含一个 512x512 像素的 APP 图标。这个图标通常由 App Store 从你提交到 iTunes Connect 的物料中提供。但是，由于 APP ad hoc 发布不需要经过 App Store，你的图标就必须被放到你的 APP bundle 中。iTunes 使用这个图标展示你的 APP。（如果你要以这种方式发布你的 APP，你指定的文件应该与你提交到 App Store 的是同一个文件。）</br> 这个图标的文件名必须是 *iTunesArtwork*，并且不能有扩展名。对于 ad hoc 发布该文件是必须的，其他情况则是可选的。 |
| Settings bundle </br> 设置 bundle | Settings.bundle | If you want to expose custom app preferences through the Settings app, you must include a settings bundle. This bundle contains the property list data and other resource files that define your app preferences. The Settings app uses the information in this bundle to assemble the interface elements required by your app. </br> This bundle is optional. For more information about preferences and specifying a settings bundle, see [Preferences and Settings Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/UserDefaults/Introduction/Introduction.html#//apple_ref/doc/uid/10000059i). </br> 如果你想通过 Settings APP 暴露自定义的 APP 偏好设置，你必须包含设置 bundle。这个 bundle 包含属性列表数据和定义你的 APP 偏好的其他资源文件。Settings APP 使用 bundle 中的信息来组成你的 APP 所必须的交互元素。 </br> 这个 bundle 是可选的。关于偏好和指定设置 bundle 的更多信息，参见 [Preferences and Settings Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/UserDefaults/Introduction/Introduction.html#//apple_ref/doc/uid/10000059i)。 |
| Nonlocalized resource files </br> 未本地化的资源文件 | sun.png </br> mydata.plist                      | Nonlocalized resources include things like images, sound files, movies, and custom data files that your app uses. All of these files should be placed at the top level of your app bundle. </br> 未本地化的资源包括你的 APP 用到的图片、声音文件、视频和自定义数据文件这样的东西。所有这些文件都应该放在你的 APP bundle 的顶级目录下。 |
| Subdirectories for localized resources </br> 本地化资源的子目录 | en.lproj </br> fr.lproj </br> es.lproj | Localized resources must be placed in language-specific project directories, the names for which consist of an ISO 639-1 language abbreviation plus the *.lproj* suffix. (For example, the *en.lproj*, *fr.lproj*, and *es.lproj* directories contain resources localized for English, French, and Spanish.) </br> An iOS app should be internationalized and have a *language.lproj* directory for each language it supports. In addition to providing localized versions of your app’s custom resources, you can also localize your app icon, launch images, and Settings icon by placing files with the same name in your language-specific project directories. </br> For more information, see [Internationalizing Your App](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW10). </br>  本地化资源必须放置在指定语言的工程目录中，其名称由 ISO 639-1 语言缩写加上 *.lproj* 后缀组成。（例如，*en.lproj*、*fr.lproj* 和 *es.lproj* 目录包含了为英语、法语和西班牙语本地化的资源。）</br> iOS APP 应该国际化，并且对它支持的每一种语言都有一个 *language.lproj* 目录。除了提供你 APP 的自定义资源的本地化版本之外，你也可以本地化你的 APP 图标、启动图和 Settings 图标，通过把这些文件以相同的名字放入指定语言工程目录中。 </br> 更多信息，参见 [Internationalizing Your App](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ExpectedAppBehaviors/ExpectedAppBehaviors.html#//apple_ref/doc/uid/TP40007072-CH3-SW10)。|

> **Note:** An iOS app bundle cannot include a custom directory named “Resources.”
> 
> **注意：** iOS APP bundle 不能包含命名为 “Resources” 的自定义目录。

For more information about the structure of an iOS app bundle, see [Bundle Programming Guide](https://developer.apple.com/library/content/documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html#//apple_ref/doc/uid/10000123i). For information about how to load resource files from your bundle, see [Resource Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i).

关于 iOS APP bundle 的结构的更多信息，参见 [Bundle Programming Guide](https://developer.apple.com/library/content/documentation/CoreFoundation/Conceptual/CFBundles/Introduction/Introduction.html#//apple_ref/doc/uid/10000123i)。关于如何从你的 bundle 中加载资源文件，参见 [Resource Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i)。

<span id="1.1.2">
###1.1.2 The Information Property List File - 信息属性列表文件

Xcode uses information from the General, Capabilities, and Info tabs of your project to generate an information property list (*Info.plist*) file for your app at compile time. The *Info.plist* file is a structured file that contains critical information about your app’s configuration. It is used by the App Store and by iOS to determine your app’s capabilities and to locate key resources. Every app must include this file.

Xcode 使用来自于你的工程的 General、Capabilities 和 Info 标签在编译时为你的 APP 生成一个信息属性列表文件（*Info.plist*）。

Although the *Info.plist* file provided by Xcode includes default values for all of the required entries, most apps require some changes or additions. Whenever possible, use the General and Capabilities tabs to specify the configuration information for your app. Those tabs contain the most common configuration options available for apps. If you do not see a specific option on either of those tabs, use the Info tab.

For options where Xcode does not provide a custom configuration interface, you must provide appropriate keys and values directly using the Xcode property list editor. The Custom iOS Target Properties section of the Info tab contains a summary of the entries to be included in the *Info.plist* file. By default, Xcode displays human-readable descriptions of the intended feature but each feature actually corresponds to a unique key in the *Info.plist* file. Most keys are optional and used infrequently, but there are a handful of keys that you should consider when defining any new project:

- **Declare your app’s required capabilities in the Info tab.** The Required device capabilities section contains information about the device-level features that your app requires to run. The App Store uses the information in this entry to determine the capabilities of your app and to prevent it from being installed on devices that do not support features your app requires. For more information, see Declaring the Required Device Capabilities.
- **Apps that require a persistent Wi-Fi connection must declare that fact.** If your app talks to a server across the network, you can add the Application uses Wi-Fi entry to the Info tab of your project. This entry corresponds to the *UIRequiresPersistentWiFi* key in the *Info.plist* file. Setting this key to a *YES* prevents iOS from closing the active Wi-Fi connection when it has been inactive for an extended period of time. This key is recommended for all apps that use the network to communicate with a server.
- **Newsstand apps must declare themselves as such.** Include the *UINewsstandApp* key to indicate that your app presents content from the Newsstand app.
- **Apps that define custom document types must declare those types.** Use the Document Types section of the Info tab to specify icons and UTI information for the document formats that you support. The system uses this information to identify apps capable of handling specific file types. For more information about adding document support to your app, see [Document-Based App Programming Guide for iOS](https://developer.apple.com/library/content/documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011149).
- **Apps can declare any custom URL schemes they support.** Use the URL Types section of the Info tab to specify the custom URL schemes that your app handles. Apps can use custom URL schemes to communicate with each other. For more information about how to implement support for this feature, see [Using URL Schemes to Communicate with Apps](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW1).
- **Apps must provide purpose strings (sometimes called “usage descriptions”) for accessing user data and certain app features.** When there is a privacy concern about an app accessing user data or device capabilities, iOS prompts the user and requests permission on behalf of your app. An app must explain to the user, by way of a purpose string defined in its Info.plist file, why it requires access. If your app attempts to gain access without having provided a corresponding purpose string, your app exits.
	 
	The data and features that require user permission are described in Table 1-2. Purpose strings are described in the [Cocoa Keys](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251) chapter of [Information Property List Key Reference](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009247).

For detailed information about the keys and values you can include in the *Info.plist* file, see [Information Property List Key Reference](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009247).

<span id="1.1.3">
###1.1.3 Declaring the Required Device Capabilities 声明需要的设备功能

All apps must declare the device-specific capabilities they need to run. Xcode includes a Required device capabilities entry in your project’s Info tab and populates it with some minimum requirements. You can add values to this entry to specify additional requirements for your app. The Required device capabilities entry corresponds to the *UIRequiredDeviceCapabilities* key in your app’s *Info.plist* file.

The value of the *UIRequiredDeviceCapabilities* key is either an array or dictionary that contains additional keys identifying features your app requires (or specifically prohibits). If you specify the value of the key using an array, the presence of a key indicates that the feature is required; the absence of a key indicates that the feature is not required and that the app can run without it. If you specify a dictionary instead, each key in the dictionary must have a Boolean value that indicates whether the feature is required or prohibited. A value of *true* indicates the feature is required and a value of *false* indicates that the feature must not be present on the device. If a given capability is optional for your app, do not include the corresponding key in the dictionary.

For detailed information on the values you can include for the *UIRequiredDeviceCapabilities* key, see [Information Property List Key Reference](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009247).

<span id="1.1.4">
###1.1.4 App Icons

Every app must provide an icon to be displayed on a device’s Home screen and in the App Store. An app may actually specify several different icons for use in different situations. For example, an app can provide a small icon to use when displaying search results and can provide a high-resolution icon for devices with Retina displays.

New Xcode projects include image asset entries for your app’s icon images. To add icons, assign the corresponding image files to the image assets of your project. At build time, Xcode adds the appropriate keys to your app’s *Info.plist* file and places the images in your app bundle.

For information about designing your app icons, including the sizes of those icons, see [iOS Human Interface Guidelines](https://developer.apple.com/ios/human-interface-guidelines/).

<span id="1.1.5">
###1.1.5 App Launch (Default) Images App启动（默认）图

When the system launches an app for the first time on a device, it temporarily displays a static launch image on the screen. This image is your app’s launch image and it is a resource that you specify in your Xcode project. Launch images provide the user with immediate feedback that your app has launched while giving your app time to prepare its initial user interface. When your app’s window is configured and ready to be displayed, the system swaps out the launch image for that window.

When a recent snapshot of your app’s user interface is available, the system prefers the use of that image over the use of your app’s launch images. The system takes a snapshot of your app’s user interface when your app transitions from the foreground to the background. When your app returns to the foreground, it uses that image instead of a launch image whenever possible. In cases where the user has killed your app or your app has not run for a long time, the system discards the snapshot and relies once again on your launch images.

New Xcode projects include image asset entries for your app’s launch images. To add launch images, add the corresponding image files to the image assets of your project. At build time, Xcode adds the appropriate keys to your app’s *Info.plist* file and places the images in your app bundle.

For information about designing your app’s launch images, including the sizes of those images, see [iOS Human Interface Guidelines](https://developer.apple.com/ios/human-interface-guidelines/).

<span id="1.2">
##1.2 Supporting User Privacy 支持用户隐私政策

Designing for user privacy is important. Most iOS devices contain personal data that the user might not want to expose to apps or to external entities. If your app accesses or uses data inappropriately, the user might respond by deleting your app.

Access user or device data only with the user’s informed consent obtained in accordance with applicable law. In addition, take appropriate steps to protect user and device data and be transparent about how you use it. Here are some best practices that you can take:

- Review guidelines from government or industry sources, including the following documents:

  - The Federal Trade Commission’s report on mobile privacy: [Mobile Privacy Disclosures: Building Trust Through Transparency](http://www.ftc.gov/os/2013/02/130201mobileprivacyreport.pdf).

  - The EU Data Protection Commissioners’ Opinion on data protection for Mobile Apps: [http://ec.europa.eu/justice/data-protection/article-29/documentation/opinion-recommendation/files/2013/wp202_en.pdf](http://ec.europa.eu/justice/data-protection/article-29/documentation/opinion-recommendation/files/2013/wp202_en.pdf)

  - The Japanese Ministry of Internal Affairs and Communications’ Smartphone Privacy Initiatives:

    - Smartphone Privacy Initiative (2012):
  		
      - English: [http://www.soumu.go.jp/main_sosiki/joho_tsusin/eng/presentation/pdf/Initiative.pdf](http://www.soumu.go.jp/main_sosiki/joho_tsusin/eng/presentation/pdf/Initiative.pdf)
      - Japanese: [http://www.soumu.go.jp/main_content/000171225.pdf](http://www.soumu.go.jp/main_content/000171225.pdf)
    - Smartphone Privacy Initiative II (2013): 
      - English: [http://www.soumu.go.jp/main_sosiki/joho_tsusin/eng/presentation/pdf/Summary_II.pdf](http://www.soumu.go.jp/main_sosiki/joho_tsusin/eng/presentation/pdf/Summary_II.pdf)
      - Japanese: [http://www.soumu.go.jp/main_content/000247654.pdf](http://www.soumu.go.jp/main_content/000247654.pdf)

  - The California State Attorney General’s recommendations for mobile privacy: [Privacy on the Go: Recommendations for the Mobile Ecosystem](http://oag.ca.gov/sites/all/files/pdfs/privacy/privacy_on_the_go.pdf)

- These reports provide helpful recommendations for protecting user privacy. You should also review these documents with your company’s legal counsel.

- Request access to sensitive user or device data, which is protected by the iOS system authorization settings, at the time your app needs the data. You must supply a purpose string (sometimes called a usage description string) in your app’s Info.plist file explaining why your app needs the data or resource you are attempting to access. Data protected by iOS system authorization settings includes location, contacts, calendar events, reminders, photos, media, and many other types as well; see Table 1-2. Provide reasonable fallback behavior in situations where the user does not grant access to the requested data.

- Be transparent with users about how their data is going to be used. For example, when you submit your app to the App Store, specify a URL for your privacy policy or statement as part of your iTunes Connect metadata. You might also want to summarize that policy or statement in your app description.For more information about providing your app’s privacy policy in iTunes Connect, see a target="_self" Adding an App in iTunes Connect/a. 

- Give the user control over their user or device data. Provide settings so that the user can disable access to certain types of sensitive information as needed.

- Request and use the minimum amount of user or device data needed to accomplish a given task. Do not seek access to or collect data for non obvious reasons, for unnecessary reasons, or because you think it might be useful later.

- Take reasonable steps to protect the user and device data that you collect in your apps. When storing such information locally, try to use the iOS data protection feature (described in [Protecting Data Using On-Disk Encryption](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/StrategiesforImplementingYourApp/StrategiesforImplementingYourApp.html#//apple_ref/doc/uid/TP40007072-CH5-SW21)) to store it in an encrypted format. Use App Transport Security (as described in [NSAppTransportSecurity](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33)) when sending user or device data over the network.

- If your app uses the [ASIdentifierManager](https://developer.apple.com/reference/adsupport/asidentifiermanager) class, you must respect the value of its [advertisingTrackingEnabled](https://developer.apple.com/reference/adsupport/asidentifiermanager/1614148-advertisingtrackingenabled) property. And if that property is set to a NO/a by the user, then use the ASIdentifierManager class only for Limited Advertising Purposes. “Limited Advertising Purposes” means frequency capping, attribution, conversion events, estimating the number of unique users, advertising fraud detection, debugging for advertising purposes only, and other uses for advertising that may be permitted by Apple in Documentation for the Ad Support APIs.

- If you have not already done so, stop using the unique device identifier (UDID) provided by the uniqueIdentifier property of the [UIDevice](https://developer.apple.com/reference/uikit/uidevice) class. That property was deprecated in iOS 5.0, and the App Store does not accept new apps or app updates that use that identifier. Instead, apps should use the [identifierForVendor](https://developer.apple.com/reference/uikit/uidevice/1620059-identifierforvendor) property of the UIDevice class or the [advertisingIdentifier](https://developer.apple.com/reference/adsupport/asidentifiermanager/1614151-advertisingidentifier) property of the ASIdentifierManager class, as appropriate.

- If your app supports audio input, configure your audio session for recording only at the point where you actually plan to begin recording. Do not configure your audio session for recording at launch time if you do not plan to record right away. The system alerts users when apps configure their audio session for recording and gives the user the option to disable recording for your app.

Table 1-2 lists the types of resource and data authorizations supported by iOS. For each item, the table shows the purpose-string key and the API to use to check authorization status.

> **Important:** When your app attempts to use a protected item, the system prompts the user with an alert asking for permission for access. Starting in iOS 10, your Info.plist file must include a purpose string, for display in the permission alert, for each such item. If your app attempts to access a protected item without you having provided a corresponding purpose string, your app exits. (This behavior applies equally to an iMessage app, which must include the relevant keys listed in Table 1-2 before accessing the device’s camera or microphone.)

For some protected data and resources, iOS frameworks provide dedicated API for checking and requesting authorization, as described in Table 1-2.

Because a user can change authorization at any time by using Settings, check authorization status before accessing any of these items. (Some features, notably motion and HomeKit, do not provide dedicated API for checking system authorization status. See Table 1-2 for details.)

**Table 1-2**  Data and resources protected by system authorization settings

| **Data or resources**       | **Purpose-string Info.plist keys**       | **System authorization APIs**            |
| --------------------------- | ---------------------------------------- | ---------------------------------------- |
| Bluetooth peripherals       | [NSBluetoothPeripheralUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW20) | Use the [state](https://developer.apple.com/reference/corebluetooth/cbcentralmanager/1518740-state) property of the [CBCentralManager](https://developer.apple.com/reference/corebluetooth/cbcentralmanager) class to check system-authorization status for using Bluetooth peripherals. |
| Calendar data               | [NSCalendarsUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW15) | Use the [authorizationStatusForEntityType:](https://developer.apple.com/reference/eventkit/ekeventstore/1507239-authorizationstatusforentitytype) method of the [EKEventStore](https://developer.apple.com/reference/eventkit/ekeventstore) class to check system-authorization status for accessing calendar data. |
| Camera                      | [NSCameraUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW24) | Use the [deviceInputWithDevice:error:](https://developer.apple.com/reference/avfoundation/avcapturedeviceinput/1450880-deviceinputwithdevice) method of the [AVCaptureDeviceInput](https://developer.apple.com/reference/avfoundation/avcapturedeviceinput) class to check system-authorization status for using device cameras. |
| Contacts                    | [NSContactsUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW14) | Use the [authorizationStatusForEntityType:](https://developer.apple.com/reference/contacts/cncontactstore/1403143-authorizationstatus) method of the [CNContactStore](https://developer.apple.com/reference/contacts/cncontactstore) class to check system-authorization status for accessing contact data. |
| Health sharing              | [NSHealthShareUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW48) | Use the [authorizationStatusForType:](https://developer.apple.com/reference/healthkit/hkhealthstore/1614154-authorizationstatus) method of the [HKHealthStore](https://developer.apple.com/reference/healthkit/hkhealthstore) class to check system-authorization status for accessing health data.To request authorization, use the [requestAuthorizationToShareTypes:readTypes:completion:](https://developer.apple.com/reference/healthkit/hkhealthstore/1614152-requestauthorization) method. |
| Health updating             | [NSHealthUpdateUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW49) | Use the [authorizationStatusForType:](https://developer.apple.com/reference/healthkit/hkhealthstore/1614154-authorizationstatus) method of the [HKHealthStore](https://developer.apple.com/reference/healthkit/hkhealthstore) class to check system-authorization status for accessing health data.To request authorization, use the [requestAuthorizationToShareTypes:readTypes:completion:](https://developer.apple.com/reference/healthkit/hkhealthstore/1614152-requestauthorization) method. |
| HomeKit                     | [NSHomeKitUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW50) | When your app first attempts to access a property of the [HMHomeManager](https://developer.apple.com/reference/homekit/hmhomemanager) class, the system presents an authorization request to the user. |
| Location                    | [NSLocationAlwaysUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW18), [NSLocationWhenInUseUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW26) | Use the [authorizationStatus](https://developer.apple.com/reference/corelocation/cllocationmanager/1423523-authorizationstatus) method of the [CLLocationManager](https://developer.apple.com/reference/corelocation/cllocationmanager) class to check system-authorization status for accessing location data.To request authorization, use the [requestWhenInUseAuthorization](https://developer.apple.com/reference/corelocation/cllocationmanager/1620562-requestwheninuseauthorization) or the [requestAlwaysAuthorization](https://developer.apple.com/reference/corelocation/cllocationmanager/1620551-requestalwaysauthorization) method. |
| Microphone                  | [NSMicrophoneUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW25) | Use the [recordPermission](https://developer.apple.com/reference/avfoundation/avaudiosession/1616463-recordpermission) method of the [AVAudioSession](https://developer.apple.com/reference/avfoundation/avaudiosession) class to check system-authorization status for using device microphones.To request authorization, use the [requestRecordPermission:](https://developer.apple.com/reference/avfoundation/avaudiosession/1616601-requestrecordpermission) method. |
| Motion                      | [NSMotionUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW21) | Check for a CMErrorNotAuthorized error from the [queryActivityStartingFromDate:toDate:toQueue:withHandler:](https://developer.apple.com/reference/coremotion/cmmotionactivitymanager/1615929-queryactivitystartingfromdate) method of the [CMMotionActivityManager](https://developer.apple.com/reference/coremotion/cmmotionactivitymanager) class to check system-authorization status for accelerometer access. |
| Music and the media library | [NSAppleMusicUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW47) | Use the [authorizationStatus](https://developer.apple.com/reference/assetslibrary/alassetslibrary/1617901-authorizationstatus) method of the [ALAssetsLibrary](https://developer.apple.com/reference/assetslibrary/alassetslibrary) class to check system-authorization status for accessing media assets. |
| Photos                      | [NSPhotoLibraryUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW17) | Use the [authorizationStatus](https://developer.apple.com/reference/photos/phphotolibrary/1620745-authorizationstatus) method of the [PHPhotoLibrary](https://developer.apple.com/reference/photos/phphotolibrary) class to check system-authorization status for accessing the photo library. |
| Reminders                   | [NSRemindersUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW16) | Use the [authorizationStatusForEntityType:](https://developer.apple.com/reference/eventkit/ekeventstore/1507239-authorizationstatusforentitytype) method of the [EKEventStore](https://developer.apple.com/reference/eventkit/ekeventstore) class to check system-authorization status for accessing reminder data. |
| Siri                        | [NSSiriUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW51) | Use the [siriAuthorizationStatus](https://developer.apple.com/reference/intents/inpreferences/1829430-siriauthorizationstatus) method of the [INPreferences](https://developer.apple.com/reference/intents/inpreferences) class to check system-authorization status for using Siri.To request authorization for your app to use SiriKit, use the [requestSiriAuthorization:](https://developer.apple.com/reference/intents/inpreferences/1829429-requestsiriauthorization) method. |
| Speech recognition          | [NSSpeechRecognitionUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW52) | Use the authorizationStatus aauthorizationStatus/a method of the SFSpeechRecognizer class to check system-authorization status for using speech recognition.To request authorization for your app to use speech recognition, use the arequestAuthorization/a method. |
| TV provider                 | [NSVideoSubscriberAccountUsageDescription](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW53) | Use the acheckAccessStatusWithOptions:completionHandler:/a method of the VSAccountManager class to check system-authorization status for accessing the user’s video service subscription information.To request authorization, use the enqueueResourceAuthorizationRequest:completionHandler: method. |

View Table 1-2 as a starting point for your app’s privacy behaviors and not as a comprehensive checklist. This table’s contents evolves across iOS updates.

<span id="1.3">
##1.3 Internationalizing Your App 让App国际化

Because iOS apps are distributed in many countries, localizing your app’s content can help you reach many more customers. Users are much more likely to use an app when it is localized for their native language. When you factor your user-facing content into resource files, localizing that content is a relatively simple process.

Before you can localize your content, you must internationalize your app in order to facilitate the localization process. Internationalizing your app involves factoring out any user-facing content into localizable resource files and providing language-specific project (.lproj) directories for storing that content. It also means using appropriate technologies (such as date and number formatters) when working with language-specific and locale-specific content.

For a fully internationalized app, the localization process creates new sets of language-specific resource files for you to add to your project. A typical iOS app requires localized versions of the following types of resource files:

- Storyboard files (or nib files)—Storyboards can contain text labels and other content that need to be localized. You might also want to adjust the position of interface items to accommodate changes in text length. (Similarly, nib files can contain text that needs to be localized or layout that needs to be updated.)
- Strings files—Strings files (so named because of their .strings filename extension) contain localized versions of the static text that your app displays.
- Image files—You should avoid localizing images unless the images contain culture-specific content. Whenever possible, you should avoid storing text directly in your image files. For images that you load and use from within your app, store text in a strings file and composite that text with your image-based content at runtime.
- Video and audio files—You should avoid localizing multimedia files unless they contain language-specific or culture-specific content. For example, you would want to localize a video file that contained a voice-over track.

For information about the internationalization and localization process, see [Internationalization and Localization Guide](https://developer.apple.com/library/content/documentation/MacOSX/Conceptual/BPInternational/Introduction/Introduction.html#//apple_ref/doc/uid/10000171i). For information about the proper way to use resource files in your app, see [Resource Programming Guide](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i).
